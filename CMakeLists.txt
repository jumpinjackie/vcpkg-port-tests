cmake_minimum_required(VERSION 3.0)

if(NOT CMAKE_BUILD_TYPE)
   set(CMAKE_BUILD_TYPE "Release" CACHE STRING
       "Choose the type of build, options are: Debug Release RelWithDebInfo MinSizeRel." FORCE)
endif(NOT CMAKE_BUILD_TYPE)

if(WIN32)
    add_definitions(-D_WIN32_WINNT=0x600)
    add_definitions(-DUNICODE -D_UNICODE)
    add_definitions(/MP)
    if(NOT MSVC)
        message(FATAL_ERROR, "Only testing for vcpkg integration on Windows")
    endif(NOT MSVC)
endif(WIN32)

message(STATUS "Building for ${CMAKE_BUILD_TYPE}")

# xalan-c port
find_path(XALANC_INCLUDE NAMES "xalanc/Include/PlatformDefinitions.hpp")
find_library(XALANC_LIBRARY_DEBUG NAMES Xalan-C_1D)
find_library(XALANC_LIBRARY_RELEASE NAMES Xalan-C_1)
if(NOT XALANC_INCLUDE)
    message(FATAL_ERROR "xalan-c include path not found")
else(NOT XALANC_INCLUDE)
    message(STATUS "Found xalan-c include path: ${XALANC_INCLUDE}")
endif()
if(NOT XALANC_LIBRARY_DEBUG)
    message(FATAL_ERROR "xalan-c debug library not found")
else(NOT XALANC_LIBRARY_DEBUG)
    message(STATUS "Found xalan-c debug library: ${XALANC_LIBRARY_DEBUG}")
endif()
if(NOT XALANC_LIBRARY_RELEASE)
    message(FATAL_ERROR "xalan-c release library not found")
else(NOT XALANC_LIBRARY_RELEASE)
    message(STATUS "Found xalan-c release library: ${XALANC_LIBRARY_RELEASE}")
endif()

# xerces-c
find_path(XERCESC_INCLUDE NAMES "xercesc/util/PlatformUtils.hpp")
find_library(XERCESC_LIBRARY_DEBUG NAMES xerces-c_3D)
find_library(XERCESC_LIBRARY_RELEASE NAMES xerces-c_3)
if(NOT XERCESC_INCLUDE)
    message(FATAL_ERROR "xerces-c include path not found")
else(NOT XERCESC_INCLUDE)
    message(STATUS "Found xerces-c include path: ${XERCESC_INCLUDE}")
endif()
if(NOT XERCESC_LIBRARY_DEBUG)
    message(FATAL_ERROR "xerces-c debug library not found")
else(NOT XERCESC_LIBRARY_DEBUG)
    message(STATUS "Found xerces-c debug library: ${XERCESC_LIBRARY_DEBUG}")
endif()
if(NOT XERCESC_LIBRARY_RELEASE)
    message(FATAL_ERROR "xerces-c release library not found")
else(NOT XERCESC_LIBRARY_RELEASE)
    message(STATUS "Found xerces-c release library: ${XERCESC_LIBRARY_RELEASE}")
endif()

add_subdirectory(xalan-c)
add_subdirectory(xerces-c)