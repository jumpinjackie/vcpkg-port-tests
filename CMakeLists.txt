cmake_minimum_required(VERSION 3.0)

if(WIN32)
    add_definitions(-D_WIN32_WINNT=0x600)
    add_definitions(-DUNICODE -D_UNICODE)
    add_definitions(/MP)
    if(NOT MSVC)
        message(FATAL_ERROR, "Only testing for vcpkg integration on Windows")
    endif(NOT MSVC)
endif(WIN32)

# xalan-c port
find_path(XALANC_INCLUDE NAMES "xalanc/Include/PlatformDefinitions.hpp")
find_library(XALANC_LIBRARY NAMES Xalan-C_1)
if(NOT XALANC_INCLUDE)
    message(FATAL_ERROR "xalan-c include path not found")
else(NOT XALANC_INCLUDE)
    message(STATUS "Found xalan-c include path: ${XALANC_INCLUDE}")
endif()
if(NOT XALANC_LIBRARY)
    message(FATAL_ERROR "xalan-c library not found")
else(NOT XALANC_LIBRARY)
    message(STATUS "Found xalan-c library: ${XALANC_LIBRARY}")
endif()

# xerces-c
find_path(XERCESC_INCLUDE NAMES "xercesc/util/PlatformUtils.hpp")
find_library(XERCESC_LIBRARY NAMES xerces-c_3)
if(NOT XERCESC_INCLUDE)
    message(FATAL_ERROR "xerces-c include path not found")
else(NOT XERCESC_INCLUDE)
    message(STATUS "Found xerces-c include path: ${XERCESC_INCLUDE}")
endif()
if(NOT XERCESC_LIBRARY)
    message(FATAL_ERROR "xerces-c library not found")
else(NOT XERCESC_LIBRARY)
    message(STATUS "Found xerces-c library: ${XERCESC_LIBRARY}")
endif()

add_subdirectory(xalan-c)